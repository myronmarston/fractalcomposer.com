<%= submit_tag 'Listen to voice germ',     
      :class => 'button',
      :onclick => remote_function(:url => {:action => 'add_voice'}) %>

<%= submit_tag 'Listen to entire voice',     
      :class => 'button',
      :onclick => remote_function(:url => {:action => 'add_voice'}) %>     


<%= check_box_tag "advanced_options_toggle", 1, false, :onclick => "switchid('piece_settings'); $$('ul.tablist').each(function(e) {e.toggle();});" %>

<% @voice_or_section.getVoiceSections.each_with_index do |@voice_section, @voice_section_index| %>
    <%= render :partial => 'one_voice_section' %>
<% end %>

additional_tab_js['voices'] = remote_function(:url => {:action => 'finished_editing_voices_tab_xhr'}, 
        :with => "Form.serialize($('voices'))") + 
        "; $$('voices div.voice_sections_loading_wrap').each(function(e) {e.show();})" +
        "; $$('voices div.voice_sections_wrap').each(function(e) {e.remove();})" +
        "; $$('voices a.fieldset_toggle_lone_link').each(function(e) {e.show();})" +
        "; $$('voices fieldset fieldset').each(function(e) {e.hide();});"
  additional_tab_js['sections'] = remote_function(:url => {:action => 'finished_editing_sections_tab_xhr'}, 
        :with => "Form.serialize($('sections'))") + 
        "; $$('sections div.voice_sections_loading_wrap').each(function(e) {e.show();})" +
        "; $$('sections div.voice_sections_wrap').each(function(e) {e.remove();})" +        
        "; $$('sections a.fieldset_toggle_lone_link').each(function(e) {e.show();})" +
        "; $$('sections fieldset fieldset').each(function(e) {e.hide();});"

remote_function(:url => {:action => 'finished_editing_voices_tab_xhr'}, 
        :with => "Form.serialize($('voices'))") + 
        "; $$('div.voice_sections_loading_wrap').each(function(e) {e.show();})" +
        "; $$('div.voice_sections_wrap').each(function(e) {e.remove();});"
        
        
        "if (true) {" +
                "alert($('#{@voices_or_sections_label}').getElementsBySelector('div.one_voice_or_section').size());" +
                "Effect.DropOut('#{div_id}');" +                 
                remote_function(:url => {:action => :delete_voice_or_section_xhr}, :with => "'voice_or_section=#{singular_voices_or_sections_label}&amp;index=#{@voice_or_section_index}'") +
                "; setTimeout(\"$('#{div_id}').remove()\", 1000);" +
            "}"
            
            
                if (#{get_prototype_js_for_element_collection(plural_voices_or_sections_label, 'div.one_voice_or_section')}.size == 1) {
        alert('You cannot delete the last #{singular_voices_or_sections_label}.  There must always be at least one.');
    } else {
        Effect.DropOut('#{div_id}');
        #{notify_server_js};        
        setTimeout(\"$('#{div_id}').remove()\", 1000);
    }
    END_OF_STRING    
