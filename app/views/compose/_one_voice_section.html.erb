<% 
    set_prefix_instance_variables
    override_voice_cb_id = "#{@voice_section_input_id_prefix}_override_voice_settings"    
    voice_loading_div_id = "#{@voice_section_input_id_prefix}_voice_settings_loading_wrap"    
    voice_content_div_id = "#{@voice_section_input_id_prefix}_voice_settings_content_wrap"
    override_section_cb_id = "#{@voice_section_input_id_prefix}_override_section_settings"
    section_loading_div_id = "#{@voice_section_input_id_prefix}_section_settings_loading_wrap"
    section_content_div_id = "#{@voice_section_input_id_prefix}_section_settings_content_wrap"
-%>
  
<% render :layout => 'togglable_fieldset_wrapper', :locals => {:link_text => "Voice Section for #{@other_type_label} #{@other_type_unique_index}", :id_prefix => @voice_section_input_id_prefix, :show_fieldset_initially => false } do %>   
  <p>
    <%= hidden_field_tag "#{@voice_section_input_name_prefix}[ignore]", 'ensure have hash', :id => "#{@voice_section_input_id_prefix}_ignore" %>
    Rest <%= check_box_tag "#{@voice_section_input_name_prefix}[rest]", 1, @voice_section.getRest, :id => "#{@voice_section_input_id_prefix}_rest" %>
    <br />    
    Override Voice Settings 
    <%= check_box_tag "#{@voice_section_input_name_prefix}[override_voice_settings]", 
        1, @voice_section.getOverrideVoiceSettings, 
        :id => override_voice_cb_id, 
        :onclick => get_voice_section_override_checkbox_onclick_javascript(override_voice_cb_id, voice_loading_div_id, voice_content_div_id, @voice_or_section_div_id, 'Voice', @this_type_unique_index, @other_type_unique_index) %> 
    <br />
    Override Section Settings 
    <%= check_box_tag "#{@voice_section_input_name_prefix}[override_section_settings]", 
        1, @voice_section.getOverrideSectionSettings, 
        :id => override_section_cb_id, 
        :onclick => get_voice_section_override_checkbox_onclick_javascript(override_section_cb_id, section_loading_div_id, section_content_div_id, @voice_or_section_div_id, 'Section', @this_type_unique_index, @other_type_unique_index) %> 

    <div id="<%= voice_loading_div_id %>" style="display: none">
        <h3>Loading&hellip; <%= render :partial => 'spinner', :locals => {:display => 'inline', :bottom_px => -4} %>  </h3>                 
    </div>
    <div id="<%= voice_content_div_id %>">
        <% # this div must always be present because our code replaces the inner html -%>
        <% if @voice_section.getOverrideVoiceSettings -%>
            <%= render :partial => 'voice_settings', :locals => {:settings => @voice_section.getVoiceSettings, :input_prefix => @voice_section_input_name_prefix} %>
        <% end -%>
    </div>
    <div id="<%= section_loading_div_id %>" style="display: none">
        <h3>Loading&hellip; <%= render :partial => 'spinner', :locals => {:display => 'inline', :bottom_px => -4} %>  </h3>                 
    </div>
    <div id="<%= section_content_div_id %>">
        <% # this div must always be present because our code replaces the inner html -%>
        <% if @voice_section.getOverrideSectionSettings -%>
            <%= render :partial => 'section_settings', :locals => {:settings => @voice_section.getSectionSettings, :input_prefix => @voice_section_input_name_prefix} %>
        <% end -%>
    </div>
    
  </p>    
<% end -%>